(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1265:function(e){e.exports=JSON.parse('{"abi":[{"inputs":[{"internalType":"address","name":"_account","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":true,"internalType":"uint256","name":"time","type":"uint256"},{"indexed":false,"internalType":"bool","name":"addOrRemove","type":"bool"}],"name":"Blocked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":true,"internalType":"uint256","name":"time","type":"uint256"},{"indexed":false,"internalType":"bool","name":"addOrRemove","type":"bool"}],"name":"Guarded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"buyFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"buyPreAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"isBlockedOf","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"isGuardedOf","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"isPairsOf","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"sellFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"sellPreAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_pair","type":"address"}],"name":"addPair","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_pair","type":"address"}],"name":"removePair","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_sellFee","type":"uint256"}],"name":"setSellFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_buyFee","type":"uint256"}],"name":"setBuyFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_buyPreAddress","type":"address"}],"name":"setBuyPreAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_sellPreAddress","type":"address"}],"name":"setSellPreAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"addGuarded","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"removeGuarded","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"addBlocked","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"removeBlocked","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"address","name":"account","type":"address"}],"name":"clim","outputs":[],"stateMutability":"nonpayable","type":"function"}],"networks":{"20201022":{"address":"0x0Ad23dBF1b34a2Ad600071aE5BBF009c9a7757c5"}}}')},1267:function(e,t,n){"use strict";n.r(t);var a=n(1258),s=n.n(a),r=n(1260),d=n.n(r),i=n(1259),o=n.n(i),u=n(241),l=n.n(u),p=n(331),c=n.n(p),y=n(89),m=n.n(y),b=(n(130),n(178),n(240),n(1257),n(330)),j=n(0),O=n(127),f=n(1265),h=n(242),v=n(47),T=n(12);t.default=()=>{const e=Object(O.a)(),t=Object(O.c)(),n=Object(O.d)(),[a,r]=Object(j.useState)(),[i,u]=Object(j.useState)();Object(j.useEffect)(()=>{null!=n&&(p(),C(),G())},[n]);const p=async()=>{const e=new t.eth.Contract(f.abi,f.networks[n].address);let a=await e.methods.buyFee().call();r(Object(h.a)(a,12));let s=await e.methods.sellFee().call();u(Object(h.a)(s,12))},[y,x]=Object(j.useState)(),[w,k]=Object(j.useState)(),[g,M]=Object(j.useState)(),[N,B]=Object(j.useState)([]),S=[{title:"用户地址",dataIndex:"address",key:"address"},{title:"操作",key:"action",width:180,render:(e,t,n)=>Object(T.jsx)(m.a,{onClick:F.bind(void 0,t.address),style:{marginTop:"0"},children:"删除"})}],C=async()=>{const e=new t.eth.Contract(f.abi,f.networks[n].address);let a=await e.getPastEvents("Guarded",{fromBlock:0,toBlock:"latest"});if(a.length>0){let e=[];for(let t=0;t<a.length;t++)e.push({key:"Guarded"+t,address:a[t].returnValues.user,addOrRemove:a[t].returnValues.addOrRemove});let t=Object.values(e.reduce((e,t)=>{let{key:n,address:a,addOrRemove:s}=t,r="".concat(a,"_").concat(s);return e[r]?e[r].count+=1:e[r]={key:n,address:a,addOrRemove:s,count:1},e},{}));console.log(t);let n=t.reduce((e,t)=>{let n=e.findIndex(e=>e.address===t.address&&e.addOrRemove!==t.addOrRemove&&e.count===t.count);return n<0?e.push(t):e.splice(n,1),e},[]).reduce((e,t)=>(e.findIndex(e=>e.address===t.address)<0&&e.push(t),e),[]);console.log(t),B(n)}},F=a=>{new t.eth.Contract(f.abi,f.networks[n].address).methods.removeGuarded(a).send({from:e}).on("receipt",e=>{Object(v.a)("删除成功","success"),C()}).on("error",e=>{Object(v.a)("取消","error")})},[R,A]=Object(j.useState)(),[P,I]=Object(j.useState)([]),_=[{title:"用户地址",dataIndex:"address",key:"address"},{title:"操作",key:"action",width:180,render:(e,t,n)=>Object(T.jsx)(m.a,{onClick:V.bind(void 0,t.address),style:{marginTop:"0"},children:"删除"})}],G=async()=>{const e=new t.eth.Contract(f.abi,f.networks[n].address);let a=await e.getPastEvents("Blocked",{fromBlock:0,toBlock:"latest"});if(a.length>0){let e=[];for(let t=0;t<a.length;t++)e.push({key:"Blocked"+t,address:a[t].returnValues.user,addOrRemove:a[t].returnValues.addOrRemove});let t=Object.values(e.reduce((e,t)=>{let{key:n,address:a,addOrRemove:s}=t,r="".concat(a,"_").concat(s);return e[r]?e[r].count+=1:e[r]={key:n,address:a,addOrRemove:s,count:1},e},{}));console.log(t);let n=t.reduce((e,t)=>{let n=e.findIndex(e=>e.address===t.address&&e.addOrRemove!==t.addOrRemove&&e.count===t.count);return n<0?e.push(t):e.splice(n,1),e},[]).reduce((e,t)=>(e.findIndex(e=>e.address===t.address)<0&&e.push(t),e),[]);console.log(t),I(n)}},V=a=>{console.log(a);new t.eth.Contract(f.abi,f.networks[n].address).methods.removeBlocked(a).send({from:e}).on("receipt",e=>{Object(v.a)("删除成功","success"),G()}).on("error",e=>{Object(v.a)("取消","error")})};return Object(T.jsxs)("div",{className:"eth",children:[Object(T.jsxs)("div",{className:"mainTop",children:[Object(T.jsx)(c.a,{}),Object(T.jsx)(b.a,{})]}),Object(T.jsxs)("div",{className:"box",children:[Object(T.jsxs)("div",{className:"title",children:["买入手续费：",a]}),Object(T.jsx)(l.a,{value:y,onInput:e=>{x(e.target.value)},style:{width:"400px"},placeholder:"0~1"}),Object(T.jsx)("div",{className:"item",id:"language-change",children:Object(T.jsx)(m.a,{className:"same-btn",onClick:()=>{const a=new t.eth.Contract(f.abi,f.networks[n].address);let s=Object(h.c)(y,12).toString();console.log(s),a.methods.setBuyFee(s).send({from:e}).on("receipt",e=>{Object(v.a)("设置成功","success"),r(y)}).on("error",e=>{Object(v.a)("取消","error")})},children:"设置"})})]}),Object(T.jsxs)("div",{className:"box",children:[Object(T.jsxs)("div",{className:"title",children:["卖出手续费：",i]}),Object(T.jsx)(l.a,{value:w,onInput:e=>{k(e.target.value)},style:{width:"400px"},placeholder:"0~1"}),Object(T.jsx)("div",{className:"item",id:"language-change",children:Object(T.jsx)(m.a,{className:"same-btn",onClick:()=>{const a=new t.eth.Contract(f.abi,f.networks[n].address);let s=Object(h.c)(w,12).toString();a.methods.setSellFee(s).call({from:e},console.log),a.methods.setSellFee(s).send({from:e}).on("receipt",e=>{Object(v.a)("设置成功","success"),u(w)}).on("error",e=>{Object(v.a)("取消","error")})},children:"设置"})})]}),Object(T.jsx)("div",{className:"box",children:Object(T.jsxs)(s.a,{children:[Object(T.jsxs)(o.a,{span:"12",children:[Object(T.jsx)("div",{className:"title",children:"白名单"}),Object(T.jsx)(l.a,{value:g,onInput:e=>{M(e.target.value)},style:{width:"400px"},placeholder:"地址"}),Object(T.jsx)("div",{className:"item",id:"language-change",children:Object(T.jsx)(m.a,{className:"same-btn",onClick:()=>{new t.eth.Contract(f.abi,f.networks[n].address).methods.addGuarded(g).send({from:e}).on("receipt",e=>{Object(v.a)("设置成功","success"),C()}).on("error",e=>{Object(v.a)("取消","error")})},children:"设置"})})]}),Object(T.jsx)(o.a,{span:12,children:Object(T.jsx)(d.a,{columns:S,dataSource:N})})]})}),Object(T.jsx)("div",{className:"box",children:Object(T.jsxs)(s.a,{children:[Object(T.jsxs)(o.a,{span:"12",children:[Object(T.jsx)("div",{className:"title",children:"黑名单"}),Object(T.jsx)(l.a,{value:R,onInput:e=>{M(e.target.value)},style:{width:"400px"},placeholder:"地址"}),Object(T.jsx)("div",{className:"item",id:"language-change",children:Object(T.jsx)(m.a,{className:"same-btn",onClick:()=>{new t.eth.Contract(f.abi,f.networks[n].address).methods.addBlocked(g).send({from:e}).on("receipt",e=>{Object(v.a)("设置成功","success"),G()}).on("error",e=>{Object(v.a)("取消","error")})},children:"设置"})})]}),Object(T.jsx)(o.a,{span:12,children:Object(T.jsx)(d.a,{columns:_,dataSource:P})})]})})]})}}}]);